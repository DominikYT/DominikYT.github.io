<!DOCTYPE html>
<html>
<head>
  <title>Users</title>
</head>
<body>
<h1>Users List</h1>

<div id="passwordDiv">
  <input type="password" id="adminPassword" placeholder="Enter admin password">
  <button id="submitPwd">Submit</button>
</div>

<ul id="userList" style="display:none;"></ul>

<script type="module">
import { auth } from './firebase.js';
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";

// DOM elements
const passwordInput = document.getElementById('adminPassword');
const submitBtn = document.getElementById('submitPwd');
const passwordDiv = document.getElementById('passwordDiv');
const userList = document.getElementById('userList');

// Firebase login check
onAuthStateChanged(auth, user => {
  if(!user){
    alert("You are not logged in!");
    window.location.href = "index.html";
  }
});

// Check admin password
submitBtn.addEventListener('click', () => {
  const pwd = passwordInput.value.trim();
  if(pwd === "admin") {
    passwordDiv.style.display = "none";
    userList.style.display = "block";
    const li = document.createElement('li');
    li.textContent = auth.currentUser.email; // Show logged-in user email
    userList.appendChild(li);
  } else {
    alert("Incorrect password!");
  }
});
</script>
</body>
</html>
