<!DOCTYPE html>
<html>
<head>
  <title>Users</title>
</head>
<body>
<h1>Users List</h1>

<!-- Password form -->
<div id="passwordDiv">
  <input type="password" id="adminPassword" placeholder="Enter admin password">
  <button id="submitPwd">Submit</button>
</div>

<ul id="userList" style="display:none;"></ul>

<script type="module">
import { auth } from './firebase.js';
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";

const passwordInput = document.getElementById('adminPassword');
const submitBtn = document.getElementById('submitPwd');
const passwordDiv = document.getElementById('passwordDiv');
const userList = document.getElementById('userList');

submitBtn.addEventListener('click', () => {
  if(passwordInput.value === 'admin') {
    passwordDiv.style.display = 'none';
    userList.style.display = 'block';
  } else {
    alert("Incorrect password!");
  }
});

// Check if user is logged in via Firebase
onAuthStateChanged(auth, user => {
  if(!user){
    alert("You are not logged in!");
    window.location.href = "index.html";
  }
});
</script>
</body>
</html>
